C++ è®¾è®¡æ¨¡å¼

# ä»£ç†æ¨¡å¼

ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ç®€å•æ¥è¯´ï¼Œä»£ç†å°±åƒæ˜¯çœŸå®å¯¹è±¡çš„"æ›¿èº«"æˆ–"ä¸­ä»‹"ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜åŸå§‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œå¢åŠ é¢å¤–çš„åŠŸèƒ½æˆ–æ§åˆ¶è®¿é—®ã€‚

æƒ³è±¡ä¸€ä¸‹è¦ç§Ÿæˆ¿ï¼Œä½†ä¸ç›´æ¥è”ç³»æˆ¿ä¸œï¼Œè€Œæ˜¯é€šè¿‡æˆ¿äº§ä¸­ä»‹ï¼š
- ä¸­ä»‹ï¼ˆä»£ç†ï¼‰ä»£è¡¨æˆ¿ä¸œï¼ˆçœŸå®å¯¹è±¡ï¼‰
- ä¸­ä»‹å¯ä»¥ç­›é€‰å®¢æˆ·ã€æä¾›é¢å¤–æœåŠ¡ï¼ˆå¦‚çœ‹æˆ¿ã€ç­¾åˆåŒï¼‰
- ä½ æœ€ç»ˆè¿˜æ˜¯ç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­ï¼Œä½†é€šè¿‡ä¸­ä»‹è¿™ä¸ªä¸­é—´äºº

```cpp
#include <iostream>
#include <string>
#include <memory>

// 1. å®šä¹‰æ¥å£
class Image {
public:
    virtual void display() = 0;
    virtual ~Image() = default;
};

// 2. çœŸå®å¯¹è±¡ - å®é™…åŠ è½½å’Œæ˜¾ç¤ºå›¾ç‰‡çš„ç±»
class RealImage : public Image {
private:
    std::string filename;
    
    void loadFromDisk() {
        std::cout << "åŠ è½½å›¾ç‰‡: " << filename << std::endl;
    }
    
public:
    RealImage(const std::string& filename) : filename(filename) {
        loadFromDisk();
    }
    
    void display() override {
        std::cout << "æ˜¾ç¤ºå›¾ç‰‡: " << filename << std::endl;
    }
};

// 3. ä»£ç† - æ§åˆ¶å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®
class ProxyImage : public Image {
private:
    std::string filename;
    std::unique_ptr<RealImage> realImage;
    
public:
    ProxyImage(const std::string& filename) : filename(filename), realImage(nullptr) {}
    
    void display() override {
        // å»¶è¿Ÿåˆå§‹åŒ–ï¼šåªæœ‰åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºçœŸå®å¯¹è±¡
        if (realImage == nullptr) {
            realImage = std::make_unique<RealImage>(filename);
        }
        // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¢å¤–åŠŸèƒ½ï¼Œå¦‚è®¿é—®æ§åˆ¶ã€æ—¥å¿—è®°å½•ç­‰
        std::cout << "ä»£ç†: æ­£åœ¨å¤„ç†æ˜¾ç¤ºè¯·æ±‚..." << std::endl;
        realImage->display();
        std::cout << "ä»£ç†: æ˜¾ç¤ºå®Œæˆ" << std::endl;
    }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    std::cout << "=== ä»£ç†æ¨¡å¼ç¤ºä¾‹ ===\n" << std::endl;
    
    // åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œæ­¤æ—¶ä¸ä¼šåŠ è½½å›¾ç‰‡
    ProxyImage proxy("photo.jpg");
    
    std::cout << "\nå›¾ç‰‡å°šæœªåŠ è½½..." << std::endl;
    
    // åªæœ‰å½“è°ƒç”¨display()æ—¶ï¼Œæ‰ä¼šå®é™…åŠ è½½å›¾ç‰‡
    std::cout << "\nç¬¬ä¸€æ¬¡è°ƒç”¨display():" << std::endl;
    proxy.display();
    
    std::cout << "\nç¬¬äºŒæ¬¡è°ƒç”¨display():" << std::endl;
    // è¿™æ¬¡ä¸ä¼šé‡æ–°åŠ è½½å›¾ç‰‡ï¼Œå› ä¸ºå·²ç»åŠ è½½è¿‡äº†
    proxy.display();
    
    return 0;
}
```

è¾“å‡ºç»“æœ

```
=== ä»£ç†æ¨¡å¼ç¤ºä¾‹ ===

å›¾ç‰‡å°šæœªåŠ è½½...

ç¬¬ä¸€æ¬¡è°ƒç”¨display():
ä»£ç†: æ­£åœ¨å¤„ç†æ˜¾ç¤ºè¯·æ±‚...
åŠ è½½å›¾ç‰‡: photo.jpg
æ˜¾ç¤ºå›¾ç‰‡: photo.jpg
ä»£ç†: æ˜¾ç¤ºå®Œæˆ

ç¬¬äºŒæ¬¡è°ƒç”¨display():
ä»£ç†: æ­£åœ¨å¤„ç†æ˜¾ç¤ºè¯·æ±‚...
æ˜¾ç¤ºå›¾ç‰‡: photo.jpg
ä»£ç†: æ˜¾ç¤ºå®Œæˆ
```

## ä»£ç†æ¨¡å¼çš„ä¼˜åŠ¿

1. **å»¶è¿Ÿåˆå§‹åŒ–**ï¼šåªæœ‰åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡
2. **è®¿é—®æ§åˆ¶**ï¼šä»£ç†å¯ä»¥éªŒè¯æƒé™åå†å†³å®šæ˜¯å¦è°ƒç”¨çœŸå®å¯¹è±¡
3. **é¢å¤–åŠŸèƒ½**ï¼šå¯ä»¥åœ¨è°ƒç”¨çœŸå®å¯¹è±¡å‰åæ·»åŠ æ—¥å¿—ã€ç¼“å­˜ç­‰é¢å¤–åŠŸèƒ½
4. **è¿œç¨‹ä»£ç†**ï¼šå¯ä»¥ä»£è¡¨ä½äºä¸åŒåœ°å€ç©ºé—´çš„å¯¹è±¡

## å…¶ä»–ç±»å‹çš„ä»£ç†

- **è™šæ‹Ÿä»£ç†**ï¼šå»¶è¿Ÿåˆ›å»ºæ˜‚è´µå¯¹è±¡ï¼ˆå¦‚ä¸Šä¾‹ï¼‰
- **ä¿æŠ¤ä»£ç†**ï¼šæ§åˆ¶å¯¹æ•æ„Ÿå¯¹è±¡çš„è®¿é—®
- **è¿œç¨‹ä»£ç†**ï¼šä»£è¡¨è¿œç¨‹å¯¹è±¡ï¼ˆå¦‚ç½‘ç»œæœåŠ¡ï¼‰
- **æ™ºèƒ½å¼•ç”¨**ï¼šåœ¨è®¿é—®å¯¹è±¡æ—¶æ·»åŠ é¢å¤–æ“ä½œï¼ˆå¦‚å¼•ç”¨è®¡æ•°ï¼‰

# ç­–ç•¥æ¨¡å¼

ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ç«¯ã€‚

æƒ³è±¡ä¸€ä¸‹è¦å‡ºè¡Œï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„äº¤é€šæ–¹å¼ï¼š
- å¼€è½¦ï¼ˆä¸€ç§ç­–ç•¥ï¼‰
- åå…¬äº¤ï¼ˆå¦ä¸€ç§ç­–ç•¥ï¼‰
- éª‘è‡ªè¡Œè½¦ï¼ˆåˆä¸€ç§ç­–ç•¥ï¼‰

æ¯ç§ç­–ç•¥éƒ½èƒ½å¸¦ä½ åˆ°è¾¾ç›®çš„åœ°ï¼Œä½†å„æœ‰ä¸åŒçš„ä¼˜ç¼ºç‚¹ï¼ˆæ—¶é—´ã€æˆæœ¬ã€èˆ’é€‚åº¦ç­‰ï¼‰ã€‚å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µï¼ˆå¤©æ°”ã€è·ç¦»ã€é¢„ç®—ï¼‰é€‰æ‹©æœ€åˆé€‚çš„ç­–ç•¥ã€‚

```cpp
#include <iostream>
#include <memory>
#include <vector>

// 1. ç­–ç•¥æ¥å£ï¼šå®šä¹‰æ‰€æœ‰æ”¯æŒçš„ç®—æ³•çš„å…¬å…±æ¥å£
class TravelStrategy {
public:
    virtual void travel(const std::string& from, const std::string& to) = 0;
    virtual ~TravelStrategy() = default;
};

// 2. å…·ä½“ç­–ç•¥ï¼šå®ç°ä¸åŒçš„ç®—æ³•
class CarTravel : public TravelStrategy {
public:
    void travel(const std::string& from, const std::string& to) override {
        std::cout << "å¼€è½¦ä» " << from << " åˆ° " << to 
                  << " - æ—¶é—´çµæ´»ï¼Œæˆæœ¬ä¸­ç­‰" << std::endl;
    }
};

class BusTravel : public TravelStrategy {
public:
    void travel(const std::string& from, const std::string& to) override {
        std::cout << "åå…¬äº¤ä» " << from << " åˆ° " << to 
                  << " - æˆæœ¬ä½ï¼Œä½†æ—¶é—´å›ºå®š" << std::endl;
    }
};

class BikeTravel : public TravelStrategy {
public:
    void travel(const std::string& from, const std::string& to) override {
        std::cout << "éª‘è‡ªè¡Œè½¦ä» " << from << " åˆ° " << to 
                  << " - ç¯ä¿å¥åº·ï¼Œä½†å—å¤©æ°”å½±å“" << std::endl;
    }
};

// 3. ä¸Šä¸‹æ–‡ç±»ï¼šç»´æŠ¤ä¸€ä¸ªç­–ç•¥å¯¹è±¡çš„å¼•ç”¨
class TravelPlanner {
private:
    std::unique_ptr<TravelStrategy> strategy;
    
public:
    // è®¾ç½®ç­–ç•¥
    void setStrategy(std::unique_ptr<TravelStrategy> newStrategy) {
        strategy = std::move(newStrategy);
    }
    
    // æ‰§è¡Œç­–ç•¥
    void executeTravel(const std::string& from, const std::string& to) {
        if (strategy) {
            strategy->travel(from, to);
        } else {
            std::cout << "è¯·å…ˆé€‰æ‹©å‡ºè¡Œæ–¹å¼!" << std::endl;
        }
    }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    std::cout << "=== ç­–ç•¥æ¨¡å¼ç¤ºä¾‹ï¼šå‡ºè¡Œè§„åˆ’ ===" << std::endl;
    
    TravelPlanner planner;
    std::string from = "å®¶";
    std::string to = "å…¬å¸";
    
    // é€‰æ‹©ä¸åŒçš„ç­–ç•¥
    std::cout << "\n1. æ™´å¤©å‡ºè¡Œï¼š" << std::endl;
    planner.setStrategy(std::make_unique<BikeTravel>());
    planner.executeTravel(from, to);
    
    std::cout << "\n2. é›¨å¤©å‡ºè¡Œï¼š" << std::endl;
    planner.setStrategy(std::make_unique<CarTravel>());
    planner.executeTravel(from, to);
    
    std::cout << "\n3. èŠ‚çœå¼€æ”¯ï¼š" << std::endl;
    planner.setStrategy(std::make_unique<BusTravel>());
    planner.executeTravel(from, to);
    
    // åŠ¨æ€æ”¹å˜ç­–ç•¥
    std::cout << "\n4. åŠ¨æ€æ”¹å˜ç­–ç•¥ï¼š" << std::endl;
    std::cout << "å¼€å§‹éª‘è‡ªè¡Œè½¦..." << std::endl;
    planner.setStrategy(std::make_unique<BikeTravel>());
    planner.executeTravel(from, "ä¸­é€”ç‚¹");
    
    std::cout << "æ”¹ä¸ºåå…¬äº¤..." << std::endl;
    planner.setStrategy(std::make_unique<BusTravel>());
    planner.executeTravel("ä¸­é€”ç‚¹", to);
    
    return 0;
}
```

è¾“å‡ºç»“æœ

```
=== ç­–ç•¥æ¨¡å¼ç¤ºä¾‹ï¼šå‡ºè¡Œè§„åˆ’ ===

1. æ™´å¤©å‡ºè¡Œï¼š
éª‘è‡ªè¡Œè½¦ä» å®¶ åˆ° å…¬å¸ - ç¯ä¿å¥åº·ï¼Œä½†å—å¤©æ°”å½±å“

2. é›¨å¤©å‡ºè¡Œï¼š
å¼€è½¦ä» å®¶ åˆ° å…¬å¸ - æ—¶é—´çµæ´»ï¼Œæˆæœ¬ä¸­ç­‰

3. èŠ‚çœå¼€æ”¯ï¼š
åå…¬äº¤ä» å®¶ åˆ° å…¬å¸ - æˆæœ¬ä½ï¼Œä½†æ—¶é—´å›ºå®š

4. åŠ¨æ€æ”¹å˜ç­–ç•¥ï¼š
å¼€å§‹éª‘è‡ªè¡Œè½¦...
éª‘è‡ªè¡Œè½¦ä» å®¶ åˆ° ä¸­é€”ç‚¹ - ç¯ä¿å¥åº·ï¼Œä½†å—å¤©æ°”å½±å“
æ”¹ä¸ºåå…¬äº¤...
åå…¬äº¤ä» ä¸­é€”ç‚¹ åˆ° å…¬å¸ - æˆæœ¬ä½ï¼Œä½†æ—¶é—´å›ºå®š
```

## ç­–ç•¥æ¨¡å¼çš„ä¼˜åŠ¿

1. **å¼€é—­åŸåˆ™**ï¼šæ— éœ€ä¿®æ”¹ä¸Šä¸‹æ–‡å°±èƒ½å¼•å…¥æ–°ç­–ç•¥
2. **æ¶ˆé™¤æ¡ä»¶è¯­å¥**ï¼šé¿å…ä½¿ç”¨å¤§é‡çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼ˆif-elseæˆ–switchï¼‰
3. **ä»£ç å¤ç”¨**ï¼šå¯ä»¥åœ¨å¤šä¸ªä¸Šä¸‹æ–‡ä¸­å¤ç”¨ç­–ç•¥
4. **è¿è¡Œæ—¶åˆ‡æ¢**ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜å¯¹è±¡çš„è¡Œä¸º

## é€‚ç”¨åœºæ™¯

1. å½“æœ‰å¤šä¸ªç±»ä¼¼çš„ç±»ï¼Œåªåœ¨è¡Œä¸ºä¸Šæœ‰æ‰€ä¸åŒæ—¶
2. å½“ä¸€ä¸ªç±»æœ‰å¤šç§è¡Œä¸ºå˜ä½“ï¼Œä½¿ç”¨æ¡ä»¶è¯­å¥éš¾ä»¥ç»´æŠ¤æ—¶
3. å½“éœ€è¦éš”ç¦»ç®—æ³•çš„å®ç°ç»†èŠ‚å’Œä½¿ç”¨é€»è¾‘æ—¶
4. å½“ç±»æœ‰å¤šç§è¡Œä¸ºï¼Œä¸”è¿™äº›è¡Œä¸ºåœ¨ç±»çš„æ“ä½œä¸­é¢‘ç¹åˆ‡æ¢æ—¶

# è§‚å¯Ÿè€…æ¨¡å¼

è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚å½“ä¸»é¢˜å¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°ã€‚

æƒ³è±¡ä¸€ä¸‹æŠ¥çº¸è®¢é˜…æœåŠ¡ï¼š
- æŠ¥ç¤¾ï¼ˆä¸»é¢˜ï¼‰å‡ºç‰ˆæŠ¥çº¸
- è®¢é˜…è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰æ³¨å†Œæ¥æ”¶æŠ¥çº¸
- å½“æ–°æŠ¥çº¸å‡ºç‰ˆæ—¶ï¼Œæ‰€æœ‰è®¢é˜…è€…ä¼šè‡ªåŠ¨æ”¶åˆ°æŠ¥çº¸
- è®¢é˜…è€…å¯ä»¥éšæ—¶å–æ¶ˆè®¢é˜…ï¼Œä¸å†æ¥æ”¶æŠ¥çº¸

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <string>
#include <memory>

// å‰å‘å£°æ˜
class IObserver;

// 1. ä¸»é¢˜æ¥å£
class ISubject {
public:
    virtual void attach(std::shared_ptr<IObserver> observer) = 0;
    virtual void detach(std::shared_ptr<IObserver> observer) = 0;
    virtual void notify() = 0;
    virtual ~ISubject() = default;
};

// 2. è§‚å¯Ÿè€…æ¥å£
class IObserver {
public:
    virtual void update(const std::string& message) = 0;
    virtual ~IObserver() = default;
};

// 3. å…·ä½“ä¸»é¢˜ - æ–°é—»å‘å¸ƒå™¨
class NewsPublisher : public ISubject {
private:
    std::vector<std::shared_ptr<IObserver>> observers;
    std::string news;

public:
    void attach(std::shared_ptr<IObserver> observer) override {
        observers.push_back(observer);
    }

    void detach(std::shared_ptr<IObserver> observer) override {
        observers.erase(
            std::remove(observers.begin(), observers.end(), observer),
            observers.end()
        );
    }

    void notify() override {
        for (auto& observer : observers) {
            observer->update(news);
        }
    }

    void setNews(const std::string& newNews) {
        news = newNews;
        std::cout << "æ–°é—»ç¤¾: å‘å¸ƒäº†æ–°æ–°é—» - " << news << std::endl;
        notify(); // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
    }
};

// 4. å…·ä½“è§‚å¯Ÿè€… - æ–°é—»è®¢é˜…è€…
class NewsSubscriber : public IObserver, public std::enable_shared_from_this<NewsSubscriber> {
private:
    std::string name;
    std::shared_ptr<ISubject> subject;

public:
    NewsSubscriber(const std::string& name, std::shared_ptr<ISubject> sub) 
        : name(name), subject(sub) {
        // è‡ªåŠ¨è®¢é˜…
        subject->attach(shared_from_this());
        std::cout << name << " è®¢é˜…äº†æ–°é—»" << std::endl;
    }

    ~NewsSubscriber() {
        // è‡ªåŠ¨å–æ¶ˆè®¢é˜…
        if (subject) {
            subject->detach(shared_from_this());
            std::cout << name << " å–æ¶ˆè®¢é˜…äº†æ–°é—»" << std::endl;
        }
    }

    void update(const std::string& message) override {
        std::cout << name << " æ”¶åˆ°æ–°é—»: " << message << std::endl;
    }

    void unsubscribe() {
        subject.reset(); // é‡Šæ”¾å¯¹ä¸»é¢˜çš„å¼•ç”¨ï¼Œè§¦å‘å–æ¶ˆè®¢é˜…
    }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    std::cout << "=== è§‚å¯Ÿè€…æ¨¡å¼ç¤ºä¾‹ï¼šæ–°é—»è®¢é˜…ç³»ç»Ÿ ===\n" << std::endl;
    
    // åˆ›å»ºæ–°é—»å‘å¸ƒå™¨
    auto publisher = std::make_shared<NewsPublisher>();
    
    // åˆ›å»ºè®¢é˜…è€…
    auto subscriber1 = std::make_shared<NewsSubscriber>("å¼ ä¸‰", publisher);
    auto subscriber2 = std::make_shared<NewsSubscriber>("æå››", publisher);
    auto subscriber3 = std::make_shared<NewsSubscriber>("ç‹äº”", publisher);
    
    std::cout << "\n--- å‘å¸ƒç¬¬ä¸€æ¡æ–°é—» ---" << std::endl;
    publisher->setNews("C++23æ–°ç‰¹æ€§å‘å¸ƒ!");
    
    std::cout << "\n--- å‘å¸ƒç¬¬äºŒæ¡æ–°é—» ---" << std::endl;
    publisher->setNews("äººå·¥æ™ºèƒ½æ–°çªç ´!");
    
    std::cout << "\n--- æå››å–æ¶ˆè®¢é˜… ---" << std::endl;
    subscriber2->unsubscribe();
    
    std::cout << "\n--- å‘å¸ƒç¬¬ä¸‰æ¡æ–°é—» ---" << std::endl;
    publisher->setNews("é‡å­è®¡ç®—æœºæ–°è¿›å±•!");
    
    std::cout << "\n--- ç¨‹åºç»“æŸï¼Œè‡ªåŠ¨å–æ¶ˆæ‰€æœ‰è®¢é˜… ---" << std::endl;
    return 0;
}
```

è¾“å‡ºç»“æœ

```
=== è§‚å¯Ÿè€…æ¨¡å¼ç¤ºä¾‹ï¼šæ–°é—»è®¢é˜…ç³»ç»Ÿ ===

å¼ ä¸‰ è®¢é˜…äº†æ–°é—»
æå›› è®¢é˜…äº†æ–°é—»
ç‹äº” è®¢é˜…äº†æ–°é—»

--- å‘å¸ƒç¬¬ä¸€æ¡æ–°é—» ---
æ–°é—»ç¤¾: å‘å¸ƒäº†æ–°æ–°é—» - C++23æ–°ç‰¹æ€§å‘å¸ƒ!
å¼ ä¸‰ æ”¶åˆ°æ–°é—»: C++23æ–°ç‰¹æ€§å‘å¸ƒ!
æå›› æ”¶åˆ°æ–°é—»: C++23æ–°ç‰¹æ€§å‘å¸ƒ!
ç‹äº” æ”¶åˆ°æ–°é—»: C++23æ–°ç‰¹æ€§å‘å¸ƒ!

--- å‘å¸ƒç¬¬äºŒæ¡æ–°é—» ---
æ–°é—»ç¤¾: å‘å¸ƒäº†æ–°æ–°é—» - äººå·¥æ™ºèƒ½æ–°çªç ´!
å¼ ä¸‰ æ”¶åˆ°æ–°é—»: äººå·¥æ™ºèƒ½æ–°çªç ´!
æå›› æ”¶åˆ°æ–°é—»: äººå·¥æ™ºèƒ½æ–°çªç ´!
ç‹äº” æ”¶åˆ°æ–°é—»: äººå·¥æ™ºèƒ½æ–°çªç ´!

--- æå››å–æ¶ˆè®¢é˜… ---
æå›› å–æ¶ˆè®¢é˜…äº†æ–°é—»

--- å‘å¸ƒç¬¬ä¸‰æ¡æ–°é—» ---
æ–°é—»ç¤¾: å‘å¸ƒäº†æ–°æ–°é—» - é‡å­è®¡ç®—æœºæ–°è¿›å±•!
å¼ ä¸‰ æ”¶åˆ°æ–°é—»: é‡å­è®¡ç®—æœºæ–°è¿›å±•!
ç‹äº” æ”¶åˆ°æ–°é—»: é‡å­è®¡ç®—æœºæ–°è¿›å±•!

--- ç¨‹åºç»“æŸï¼Œè‡ªåŠ¨å–æ¶ˆæ‰€æœ‰è®¢é˜… ---
å¼ ä¸‰ å–æ¶ˆè®¢é˜…äº†æ–°é—»
ç‹äº” å–æ¶ˆè®¢é˜…äº†æ–°é—»
```

## è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜åŠ¿

1. **æ¾è€¦åˆ**ï¼šä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´æ˜¯æ¾è€¦åˆçš„ï¼Œä¸»é¢˜ä¸éœ€è¦çŸ¥é“è§‚å¯Ÿè€…çš„å…·ä½“ç±»
2. **åŠ¨æ€å…³ç³»**ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…
3. **å¹¿æ’­é€šä¿¡**ï¼šä¸»é¢˜çš„å˜åŒ–ä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
4. **éµå¾ªå¼€é—­åŸåˆ™**ï¼šå¯ä»¥å¼•å…¥æ–°çš„è§‚å¯Ÿè€…ç±»è€Œä¸ä¿®æ”¹ä¸»é¢˜

## é€‚ç”¨åœºæ™¯

1. å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å˜åŒ–éœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œä½†åˆä¸çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯è°æ—¶
2. å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œä½†åˆå¸Œæœ›ä¸å®ƒä»¬ä¿æŒæ¾è€¦åˆæ—¶
3. å½“ç³»ç»Ÿä¸­æœ‰å¤šä¸ªå¯¹è±¡ä¾èµ–äºä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ—¶
4. ä¾‹å¦‚ï¼šGUIäº‹ä»¶å¤„ç†ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å‘å¸ƒ-è®¢é˜…ç³»ç»Ÿç­‰

## æ³¨æ„äº‹é¡¹

1. éœ€è¦æ³¨æ„è§‚å¯Ÿè€…çš„æ›´æ–°é¡ºåºï¼Œæœ‰æ—¶é¡ºåºå¾ˆé‡è¦
2. å¦‚æœè§‚å¯Ÿè€…å¤„ç†æ—¶é—´è¿‡é•¿ï¼Œå¯èƒ½ä¼šå½±å“ä¸»é¢˜çš„æ€§èƒ½
3. éœ€è¦å°å¿ƒå¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ—¶

# æ¡¥æ¥æ¨¡å¼

æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚è¿™ç§æ¨¡å¼é€šè¿‡æä¾›ä¸€ä¸ªæ¡¥æ¥ç»“æ„æ¥å®ç°è¿™ç§åˆ†ç¦»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚

æƒ³è±¡ä¸€ä¸‹ç”µè§†å’Œé¥æ§å™¨çš„å…³ç³»ï¼š
- ç”µè§†ï¼ˆå®ç°éƒ¨åˆ†ï¼‰ï¼šæä¾›åŸºæœ¬åŠŸèƒ½ï¼ˆå¼€æœºã€å…³æœºã€æ¢å°ç­‰ï¼‰
- é¥æ§å™¨ï¼ˆæŠ½è±¡éƒ¨åˆ†ï¼‰ï¼šæä¾›ç”¨æˆ·æ¥å£ï¼Œæ§åˆ¶ç”µè§†
- ä¸åŒçš„ç”µè§†ï¼ˆç´¢å°¼ã€ä¸‰æ˜Ÿã€å°ç±³ï¼‰å¯ä»¥ç”¨åŒä¸€ä¸ªé¥æ§å™¨æ¥å£æ§åˆ¶
- ä¸åŒçš„é¥æ§å™¨ï¼ˆæ™®é€šé¥æ§å™¨ã€è¯­éŸ³é¥æ§å™¨ã€æ‰‹æœºAppï¼‰å¯ä»¥æ§åˆ¶åŒä¸€å°ç”µè§†

æ¡¥æ¥æ¨¡å¼å°±åƒæ˜¯åœ¨ç”µè§†å’Œé¥æ§å™¨ä¹‹é—´å»ºç«‹äº†ä¸€åº§"æ¡¥æ¢"ï¼Œè®©å®ƒä»¬å¯ä»¥ç‹¬ç«‹å‘å±•å’Œå˜åŒ–ã€‚

## ç¤ºä¾‹

```cpp
#include <iostream>
#include <memory>
#include <string>

// 1. å®ç°éƒ¨åˆ†æ¥å£ï¼šç”µè§†åŠŸèƒ½
class TVImplementation {
public:
    virtual void on() = 0;
    virtual void off() = 0;
    virtual void tuneChannel(int channel) = 0;
    virtual ~TVImplementation() = default;
};

// 2. å…·ä½“å®ç°ï¼šç´¢å°¼ç”µè§†
class SonyTV : public TVImplementation {
public:
    void on() override {
        std::cout << "ç´¢å°¼ç”µè§†å¼€æœº" << std::endl;
    }
    
    void off() override {
        std::cout << "ç´¢å°¼ç”µè§†å…³æœº" << std::endl;
    }
    
    void tuneChannel(int channel) override {
        std::cout << "ç´¢å°¼ç”µè§†åˆ‡æ¢åˆ°é¢‘é“ " << channel << std::endl;
    }
};

// 3. å…·ä½“å®ç°ï¼šä¸‰æ˜Ÿç”µè§†
class SamsungTV : public TVImplementation {
public:
    void on() override {
        std::cout << "ä¸‰æ˜Ÿç”µè§†å¼€æœº" << std::endl;
    }
    
    void off() override {
        std::cout << "ä¸‰æ˜Ÿç”µè§†å…³æœº" << std::endl;
    }
    
    void tuneChannel(int channel) override {
        std::cout << "ä¸‰æ˜Ÿç”µè§†åˆ‡æ¢åˆ°é¢‘é“ " << channel << std::endl;
    }
};

// 4. æŠ½è±¡éƒ¨åˆ†ï¼šé¥æ§å™¨
class RemoteControl {
protected:
    std::shared_ptr<TVImplementation> tv;
    
public:
    RemoteControl(std::shared_ptr<TVImplementation> tvImpl) : tv(tvImpl) {}
    
    virtual void turnOn() {
        tv->on();
    }
    
    virtual void turnOff() {
        tv->off();
    }
    
    virtual void setChannel(int channel) {
        tv->tuneChannel(channel);
    }
    
    virtual ~RemoteControl() = default;
};

// 5. æ‰©å±•æŠ½è±¡ï¼šé«˜çº§é¥æ§å™¨
class AdvancedRemoteControl : public RemoteControl {
public:
    AdvancedRemoteControl(std::shared_ptr<TVImplementation> tvImpl) 
        : RemoteControl(tvImpl) {}
    
    void mute() {
        std::cout << "é«˜çº§åŠŸèƒ½ï¼šé™éŸ³" << std::endl;
    }
    
    void setChannel(int channel) override {
        std::cout << "é«˜çº§é¥æ§å™¨æ­£åœ¨åˆ‡æ¢é¢‘é“..." << std::endl;
        tv->tuneChannel(channel);
    }
};

// 6. æ‰©å±•æŠ½è±¡ï¼šè¯­éŸ³é¥æ§å™¨
class VoiceRemoteControl : public RemoteControl {
public:
    VoiceRemoteControl(std::shared_ptr<TVImplementation> tvImpl) 
        : RemoteControl(tvImpl) {}
    
    void voiceCommand(const std::string& command) {
        std::cout << "è¯­éŸ³å‘½ä»¤: \"" << command << "\"" << std::endl;
        if (command.find("é¢‘é“") != std::string::npos) {
            // ç®€å•è§£æé¢‘é“å·
            int channel = 1; // é»˜è®¤é¢‘é“
            setChannel(channel);
        } else if (command.find("å¼€æœº") != std::string::npos) {
            turnOn();
        } else if (command.find("å…³æœº") != std::string::npos) {
            turnOff();
        }
    }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    std::cout << "=== æ¡¥æ¥æ¨¡å¼ç¤ºä¾‹ï¼šç”µè§†é¥æ§ç³»ç»Ÿ ===\n" << std::endl;
    
    // åˆ›å»ºä¸åŒçš„ç”µè§†ï¼ˆå®ç°éƒ¨åˆ†ï¼‰
    auto sonyTV = std::make_shared<SonyTV>();
    auto samsungTV = std::make_shared<SamsungTV>();
    
    // åˆ›å»ºä¸åŒçš„é¥æ§å™¨ï¼ˆæŠ½è±¡éƒ¨åˆ†ï¼‰å¹¶è¿æ¥åˆ°ç”µè§†
    std::cout << "1. æ™®é€šé¥æ§å™¨æ§åˆ¶ç´¢å°¼ç”µè§†:" << std::endl;
    RemoteControl basicRemote(sonyTV);
    basicRemote.turnOn();
    basicRemote.setChannel(5);
    basicRemote.turnOff();
    
    std::cout << "\n2. é«˜çº§é¥æ§å™¨æ§åˆ¶ä¸‰æ˜Ÿç”µè§†:" << std::endl;
    AdvancedRemoteControl advancedRemote(samsungTV);
    advancedRemote.turnOn();
    advancedRemote.setChannel(8);
    advancedRemote.mute();
    advancedRemote.turnOff();
    
    std::cout << "\n3. è¯­éŸ³é¥æ§å™¨æ§åˆ¶ç´¢å°¼ç”µè§†:" << std::endl;
    VoiceRemoteControl voiceRemote(sonyTV);
    voiceRemote.voiceCommand("å¼€æœº");
    voiceRemote.voiceCommand("åˆ‡æ¢åˆ°é¢‘é“3");
    voiceRemote.voiceCommand("å…³æœº");
    
    std::cout << "\n4. åˆ‡æ¢ç”µè§†:" << std::endl;
    std::cout << "å°†è¯­éŸ³é¥æ§å™¨åˆ‡æ¢åˆ°ä¸‰æ˜Ÿç”µè§†:" << std::endl;
    // æ³¨æ„ï¼šå®é™…ä¸­å¯èƒ½éœ€è¦é‡æ–°è®¾ç½®två¼•ç”¨ï¼Œè¿™é‡Œä¸ºäº†ç®€å•ç›´æ¥åˆ›å»ºæ–°å¯¹è±¡
    VoiceRemoteControl voiceRemote2(samsungTV);
    voiceRemote2.voiceCommand("å¼€æœº");
    
    return 0;
}
```

è¾“å‡ºç»“æœ

```
=== æ¡¥æ¥æ¨¡å¼ç¤ºä¾‹ï¼šç”µè§†é¥æ§ç³»ç»Ÿ ===

1. æ™®é€šé¥æ§å™¨æ§åˆ¶ç´¢å°¼ç”µè§†:
ç´¢å°¼ç”µè§†å¼€æœº
ç´¢å°¼ç”µè§†åˆ‡æ¢åˆ°é¢‘é“ 5
ç´¢å°¼ç”µè§†å…³æœº

2. é«˜çº§é¥æ§å™¨æ§åˆ¶ä¸‰æ˜Ÿç”µè§†:
ä¸‰æ˜Ÿç”µè§†å¼€æœº
é«˜çº§é¥æ§å™¨æ­£åœ¨åˆ‡æ¢é¢‘é“...
ä¸‰æ˜Ÿç”µè§†åˆ‡æ¢åˆ°é¢‘é“ 8
é«˜çº§åŠŸèƒ½ï¼šé™éŸ³
ä¸‰æ˜Ÿç”µè§†å…³æœº

3. è¯­éŸ³é¥æ§å™¨æ§åˆ¶ç´¢å°¼ç”µè§†:
è¯­éŸ³å‘½ä»¤: "å¼€æœº"
ç´¢å°¼ç”µè§†å¼€æœº
è¯­éŸ³å‘½ä»¤: "åˆ‡æ¢åˆ°é¢‘é“3"
ç´¢å°¼ç”µè§†åˆ‡æ¢åˆ°é¢‘é“ 1
è¯­éŸ³å‘½ä»¤: "å…³æœº"
ç´¢å°¼ç”µè§†å…³æœº

4. åˆ‡æ¢ç”µè§†:
å°†è¯­éŸ³é¥æ§å™¨åˆ‡æ¢åˆ°ä¸‰æ˜Ÿç”µè§†:
è¯­éŸ³å‘½ä»¤: "å¼€æœº"
ä¸‰æ˜Ÿç”µè§†å¼€æœº
```

## æ¡¥æ¥æ¨¡å¼çš„ä¼˜åŠ¿

1. **åˆ†ç¦»æŠ½è±¡å’Œå®ç°**ï¼šæŠ½è±¡å’Œå®ç°å¯ä»¥ç‹¬ç«‹æ‰©å±•ï¼Œä¸ä¼šç›¸äº’å½±å“
2. **æé«˜å¯æ‰©å±•æ€§**ï¼šå¯ä»¥ç‹¬ç«‹åœ°æ‰©å±•æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†
3. **å‡å°‘å­ç±»æ•°é‡**ï¼šé¿å…äº†ä½¿ç”¨ç»§æ‰¿å¯¼è‡´çš„ç±»çˆ†ç‚¸é—®é¢˜
4. **å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜**ï¼šå®¢æˆ·ç«¯åªéœ€è¦ä¸æŠ½è±¡æ¥å£äº¤äº’

## é€‚ç”¨åœºæ™¯

1. å½“ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦æ‰©å±•æ—¶
2. å½“éœ€è¦åœ¨å¤šä¸ªå¯¹è±¡ä¹‹é—´å…±äº«å®ç°æ—¶
3. å½“éœ€è¦è¿è¡Œæ—¶åˆ‡æ¢å®ç°æ—¶
4. å½“ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿å¯¼è‡´ç±»å±‚æ¬¡ç»“æ„è¿‡äºå¤æ‚æ—¶

## æ¡¥æ¥æ¨¡å¼ä¸é€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«

- **æ¡¥æ¥æ¨¡å¼**ï¼šè®¾è®¡ä¹‹åˆå°±è€ƒè™‘å°†æŠ½è±¡å’Œå®ç°åˆ†ç¦»ï¼Œè®©å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–
- **é€‚é…å™¨æ¨¡å¼**ï¼šæ˜¯åœ¨è®¾è®¡å®Œæˆåï¼Œä¸ºäº†è®©ä¸å…¼å®¹çš„æ¥å£èƒ½å¤Ÿä¸€èµ·å·¥ä½œ

# ç»„åˆ

ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç¤º"éƒ¨åˆ†-æ•´ä½“"çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥ç»Ÿä¸€åœ°å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ã€‚

æƒ³è±¡ä¸€ä¸‹æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ï¼š
- æ–‡ä»¶ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼šä¸èƒ½å†åŒ…å«å…¶ä»–å†…å®¹
- æ–‡ä»¶å¤¹ï¼ˆç»„åˆèŠ‚ç‚¹ï¼‰ï¼šå¯ä»¥åŒ…å«æ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶å¤¹
- å¯ä»¥å¯¹å•ä¸ªæ–‡ä»¶æ‰§è¡Œæ“ä½œï¼Œä¹Ÿå¯ä»¥å¯¹æ•´ä¸ªæ–‡ä»¶å¤¹æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼ˆå¦‚è®¡ç®—å¤§å°ã€å¤åˆ¶ã€åˆ é™¤ï¼‰

ç»„åˆæ¨¡å¼å°±åƒæ˜¯ä¸€ä¸ªç»„ç»‡æ¶æ„å›¾ï¼Œå…¶ä¸­æ¯ä¸ªéƒ¨åˆ†ï¼ˆå‘˜å·¥ï¼‰å’Œæ•´ä½“ï¼ˆéƒ¨é—¨ï¼‰éƒ½å¯ä»¥è¢«ç»Ÿä¸€å¯¹å¾…ã€‚

## ç¤ºä¾‹

```cpp
#include <iostream>
#include <vector>
#include <memory>
#include <string>
#include <algorithm>

// 1. ç»„ä»¶æ¥å£ï¼šå®šä¹‰å¶å­å’Œå®¹å™¨çš„å…±åŒæ“ä½œ
class FileSystemComponent {
public:
    virtual void display(int depth = 0) const = 0;
    virtual int getSize() const = 0;
    virtual void add(std::shared_ptr<FileSystemComponent> component) {
        // é»˜è®¤å®ç°ï¼Œå¶å­èŠ‚ç‚¹ä¼šå¿½ç•¥è¿™ä¸ªæ“ä½œ
    }
    virtual void remove(std::shared_ptr<FileSystemComponent> component) {
        // é»˜è®¤å®ç°ï¼Œå¶å­èŠ‚ç‚¹ä¼šå¿½ç•¥è¿™ä¸ªæ“ä½œ
    }
    virtual ~FileSystemComponent() = default;
};

// 2. å¶å­èŠ‚ç‚¹ï¼šæ–‡ä»¶
class File : public FileSystemComponent {
private:
    std::string name;
    int size;
    
public:
    File(const std::string& name, int size) : name(name), size(size) {}
    
    void display(int depth = 0) const override {
        std::string indent(depth * 2, ' ');
        std::cout << indent << "ğŸ“„ " << name << " (" << size << " KB)" << std::endl;
    }
    
    int getSize() const override {
        return size;
    }
};

// 3. ç»„åˆèŠ‚ç‚¹ï¼šæ–‡ä»¶å¤¹
class Folder : public FileSystemComponent {
private:
    std::string name;
    std::vector<std::shared_ptr<FileSystemComponent>> children;
    
public:
    Folder(const std::string& name) : name(name) {}
    
    void display(int depth = 0) const override {
        std::string indent(depth * 2, ' ');
        std::cout << indent << "ğŸ“ " << name << " (" << getSize() << " KB)" << std::endl;
        
        // é€’å½’æ˜¾ç¤ºæ‰€æœ‰å­ç»„ä»¶
        for (const auto& child : children) {
            child->display(depth + 1);
        }
    }
    
    int getSize() const override {
        int totalSize = 0;
        for (const auto& child : children) {
            totalSize += child->getSize();
        }
        return totalSize;
    }
    
    void add(std::shared_ptr<FileSystemComponent> component) override {
        children.push_back(component);
    }
    
    void remove(std::shared_ptr<FileSystemComponent> component) override {
        children.erase(
            std::remove(children.begin(), children.end(), component),
            children.end()
        );
    }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    std::cout << "=== ç»„åˆæ¨¡å¼ç¤ºä¾‹ï¼šæ–‡ä»¶ç³»ç»Ÿ ===\n" << std::endl;
    
    // åˆ›å»ºæ–‡ä»¶ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰
    auto file1 = std::make_shared<File>("document.txt", 100);
    auto file2 = std::make_shared<File>("image.jpg", 500);
    auto file3 = std::make_shared<File>("video.mp4", 2000);
    auto file4 = std::make_shared<File>("readme.md", 5);
    auto file5 = std::make_shared<File>("code.cpp", 50);
    
    // åˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆç»„åˆèŠ‚ç‚¹ï¼‰
    auto root = std::make_shared<Folder>("Root");
    auto documents = std::make_shared<Folder>("Documents");
    auto media = std::make_shared<Folder>("Media");
    auto videos = std::make_shared<Folder>("Videos");
    
    // æ„å»ºæ ‘å½¢ç»“æ„
    root->add(documents);
    root->add(media);
    
    documents->add(file1);
    documents->add(file4);
    documents->add(file5);
    
    media->add(file2);
    media->add(videos);
    
    videos->add(file3);
    
    // æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ
    std::cout << "æ–‡ä»¶ç³»ç»Ÿç»“æ„:" << std::endl;
    root->display();
    
    std::cout << "\n--- è®¡ç®—æ€»å¤§å° ---" << std::endl;
    std::cout << "æ ¹ç›®å½•æ€»å¤§å°: " << root->getSize() << " KB" << std::endl;
    std::cout << "æ–‡æ¡£æ–‡ä»¶å¤¹å¤§å°: " << documents->getSize() << " KB" << std::endl;
    std::cout << "åª’ä½“æ–‡ä»¶å¤¹å¤§å°: " << media->getSize() << " KB" << std::endl;
    std::cout << "è§†é¢‘æ–‡ä»¶å¤¹å¤§å°: " << videos->getSize() << " KB" << std::endl;
    std::cout << "å•ä¸ªæ–‡ä»¶å¤§å°: " << file1->getSize() << " KB" << std::endl;
    
    // æ·»åŠ æ–°æ–‡ä»¶
    std::cout << "\n--- æ·»åŠ æ–°æ–‡ä»¶ ---" << std::endl;
    auto newFile = std::make_shared<File>("newfile.dat", 300);
    media->add(newFile);
    
    std::cout << "æ·»åŠ æ–‡ä»¶ååª’ä½“æ–‡ä»¶å¤¹å¤§å°: " << media->getSize() << " KB" << std::endl;
    
    // ç»Ÿä¸€æ“ä½œï¼šåˆ é™¤æ‰€æœ‰ç»„ä»¶
    std::cout << "\n--- åˆ é™¤æ“ä½œ ---" << std::endl;
    // æ³¨æ„ï¼šå®é™…åº”ç”¨ä¸­ä¼šæœ‰æ›´å¤æ‚çš„åˆ é™¤é€»è¾‘
    // è¿™é‡Œåªæ˜¯æ¼”ç¤ºç»„åˆæ¨¡å¼çš„æ¦‚å¿µ
    
    return 0;
}
```

è¾“å‡ºç»“æœ

```
=== ç»„åˆæ¨¡å¼ç¤ºä¾‹ï¼šæ–‡ä»¶ç³»ç»Ÿ ===

æ–‡ä»¶ç³»ç»Ÿç»“æ„:
ğŸ“ Root (2655 KB)
  ğŸ“ Documents (155 KB)
    ğŸ“„ document.txt (100 KB)
    ğŸ“„ readme.md (5 KB)
    ğŸ“„ code.cpp (50 KB)
  ğŸ“ Media (2500 KB)
    ğŸ“„ image.jpg (500 KB)
    ğŸ“ Videos (2000 KB)
      ğŸ“„ video.mp4 (2000 KB)

--- è®¡ç®—æ€»å¤§å° ---
æ ¹ç›®å½•æ€»å¤§å°: 2655 KB
æ–‡æ¡£æ–‡ä»¶å¤¹å¤§å°: 155 KB
åª’ä½“æ–‡ä»¶å¤¹å¤§å°: 2500 KB
è§†é¢‘æ–‡ä»¶å¤¹å¤§å°: 2000 KB
å•ä¸ªæ–‡ä»¶å¤§å°: 100 KB

--- æ·»åŠ æ–°æ–‡ä»¶ ---
æ·»åŠ æ–‡ä»¶ååª’ä½“æ–‡ä»¶å¤¹å¤§å°: 2800 KB

--- åˆ é™¤æ“ä½œ ---
```

## ç»„åˆæ¨¡å¼çš„ä¼˜åŠ¿

1. **ç»Ÿä¸€å¤„ç†**ï¼šå®¢æˆ·ç«¯å¯ä»¥ä¸€è‡´åœ°å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡
2. **ç®€åŒ–å®¢æˆ·ç«¯ä»£ç **ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯ç»„åˆå¯¹è±¡
3. **æ˜“äºæ‰©å±•**ï¼šå¯ä»¥å¾ˆå®¹æ˜“åœ°æ·»åŠ æ–°çš„ç»„ä»¶ç±»å‹
4. **é€’å½’ç»„åˆ**ï¼šå¯ä»¥æ„å»ºå¤æ‚çš„æ ‘å½¢ç»“æ„

## é€‚ç”¨åœºæ™¯

1. å½“éœ€è¦è¡¨ç¤ºå¯¹è±¡çš„éƒ¨åˆ†-æ•´ä½“å±‚æ¬¡ç»“æ„æ—¶
2. å½“å¸Œæœ›å®¢æˆ·ç«¯å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„å·®å¼‚æ—¶
3. å½“éœ€è¦å¤„ç†æ ‘å½¢ç»“æ„æ•°æ®æ—¶
4. ä¾‹å¦‚ï¼šæ–‡ä»¶ç³»ç»Ÿã€GUIç»„ä»¶ã€ç»„ç»‡æ¶æ„ã€èœå•ç³»ç»Ÿç­‰

## ç»„åˆæ¨¡å¼çš„å˜ä½“

1. **é€æ˜æ¨¡å¼**ï¼šåœ¨ç»„ä»¶æ¥å£ä¸­å£°æ˜æ‰€æœ‰æ–¹æ³•ï¼Œå¶å­èŠ‚ç‚¹å¯¹ä¸æ”¯æŒçš„æ–¹æ³•æä¾›ç©ºå®ç°æˆ–æŠ›å‡ºå¼‚å¸¸
2. **å®‰å…¨æ¨¡å¼**ï¼šåªåœ¨ç»„åˆèŠ‚ç‚¹ä¸­å£°æ˜ç®¡ç†å­ç»„ä»¶çš„æ–¹æ³•ï¼Œå¶å­èŠ‚ç‚¹ä¸åŒ…å«è¿™äº›æ–¹æ³•

## æ³¨æ„äº‹é¡¹

1. è®¾è®¡ç»„ä»¶æ¥å£æ—¶è¦å°å¿ƒï¼Œç¡®ä¿å®ƒé€‚åˆæ‰€æœ‰ç±»å‹çš„ç»„ä»¶
2. æœ‰æ—¶éœ€è¦åœ¨ç»„ä»¶ä¸­æ·»åŠ çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä»¥ä¾¿å‘ä¸Šéå†
3. ç¼“å­˜ç»„åˆå¯¹è±¡çš„ä¿¡æ¯ï¼ˆå¦‚å¤§å°ï¼‰å¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†éœ€è¦ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§t 